<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  {% load static %}
  <!-- Local Css/Js -->
  <link
  rel="stylesheet"
  type="text/css"
  href="{% static 'css/reviews.css' %}"
  />
  <script defer src="{% static 'javascript/reviews.js' %}"></script>

 <!-- CSS/JS CDN -->
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
    />
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
    <link
      href="https://unpkg.com/bootstrap-table@1.18.2/dist/bootstrap-table.min.css"
      rel="stylesheet"
    />
    <script src="https://unpkg.com/bootstrap-table@1.18.2/dist/bootstrap-table.min.js"></script>
    <script src="https://unpkg.com/bootstrap-table@1.18.2/dist/extensions/filter-control/bootstrap-table-filter-control.min.js"></script>
  <!-- Bootstrap Table -->
  <link
  rel="stylesheet"
  href="https://unpkg.com/bootstrap-table@1.21.4/dist/bootstrap-table.min.css"
  />
</head>
<body>
  <main class="contact">
    <nav class="navbar navbar-light bg-dark" id="navid">
      <div class="container-fluid">
        <div class="navbar-header">
          <a href="{% url 'djangoapp:index' %}" class="anchor">Home</a>
          <a href="{% url 'djangoapp:about' %}" class="anchor">About Us</a>
          <a href="{% url 'djangoapp:dealerships' %}" class="anchor"
          >Dearlers</a
          >
          <a href="{% url 'djangoapp:reviews' %}" class="anchor">Reviews</a>
          <a href="{% url 'djangoapp:contact' %}" class="anchor">Contact</a>
        </div>
        <div class="r-anchor">
          <ul class="nav navbar-nav navbar-right">
            {% if user.is_authenticated %}
            <li>
              <a class="btn btn-link" href="#"
              >{{ user.first_name }}({{ user.username }})</a
              >
              <a class="btn btn-link" href="{% url 'djangoapp:logout' %}"
              >Logout</a
              >
            </li>
            {% else %}
            <li>
             <button
             class="btn btn-link text-primary text-decoration-none"
             data-toggle="modal" data-target="#loginModal" data-whatever="user"
             >Login
           </button>
           <button
           class="btn btn-link text-primary text-decoration-none"
           data-toggle="modal" data-target="#regsModal" data-whatever="user"
           >Sign Up
         </button>
       </li>
       {% endif %}
     </ul>
   </div>
 </div>
 <!-- Bootstrap Modal -->
 <!--Pop-Up  Login -->
 <div class="modal fade" id="loginModal" tabindex="-1" role="dialog" aria-labelledby="loginLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="loginLabel">Login</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <form action="{% url 'djangoapp:login' %}" method="post" class="mt-5">
          {% csrf_token %}
          <div class="container">
            <h1>Login</h1>
            <div class="form-group">
              <label for="username"><b>User Name</b></label>
              <input
              id="username"
              class="form-control"
              type="text"
              placeholder="Enter User Name: "
              name="username"
              required
              />

              <label for="psw"><b>Password</b></label>
              <input
              id="psw"
              class="form-control"
              type="password"
              placeholder="Enter Password: "
              name="psw"
              required
              />
            </div>
            {% if message %}
            <div class="alert alert-warning">{{ message }}</div>
            {% endif %}
            <button class="btn btn-primary" type="submit">Login</button>
          </div>
        </form>
      </div>
        <!--       <div class="modal-footer">
                <button type="button" class="btn btn-primary" id="sample_msg_csr" data-dismiss="modal" >Send message</button>
              </div> -->
            </div>
          </div>
        </div>
        <!-- SignUp -->
        <div class="modal fade" id="regsModal" tabindex="-1" role="dialog" aria-labelledby="regsLabel" aria-hidden="true">
          <div class="modal-dialog" role="document">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title" id="regsLabel">Registration</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
                </button>
              </div>
              <div class="modal-body">
                <form action="{% url 'djangoapp:registration' %}" method="post" class="mt-5">
                  <div class="container">
                    {% csrf_token %}
                    <h1>Sign Up</h1>
                    <hr />
                    <div class="form-group">
                      <label for="username"><b>User Name</b></label>
                      <input
                      type="text"
                      class="form-control"
                      placeholder="Enter User Name: "
                      name="username"
                      required
                      />

                      <label for="firstname"><b>First Name</b></label>
                      <input
                      type="text"
                      class="form-control"
                      placeholder="Enter First Name: "
                      name="firstname"
                      required
                      />

                      <label for="lastname"><b>Last Name</b></label>
                      <input
                      type="text"
                      class="form-control"
                      placeholder="Enter Last Name: "
                      name="lastname"
                      required
                      />

                      <label for="psw"><b>Password</b></label>
                      <input
                      type="password"
                      class="form-control"
                      placeholder="Enter Password: "
                      name="psw"
                      required
                      />

                      {% if message %}
                      <div class="alert alert-warning">{{ message }}</div>
                      {% endif %}
                      <button class="btn btn-primary" type="submit">Sign up</button>
                    </div>
                  </div>
                </form>
              </div>
<!--               <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary" id="sample_msg" data-dismiss="modal">Send message</button>
              </div> -->
            </div>
          </div>
        </div>
        <!-- JQuery -->
        <script type="text/javascript">
          $('#loginModal').on('show.bs.modal', function (event) {
                    var button = $(event.relatedTarget) // Button that triggered the modal
                    var login = button.data('whatever') // Extract info from data-* attributes
                    // If necessary, you could initiate an AJAX request here (and then do the updating in a callback).
                    // Update the modal's content. We'll use jQuery here, but you could use a data binding library or other methods instead.
                    var modal = $(this)
                    modal.find('.modal-title').text('Login ' + login)
                    // modal.find('.modal-body input').val(contact)
                  }) 

          $('#regsModal').on('show.bs.modal', function (event) {
                    var button = $(event.relatedTarget) // Button that triggered the modal
                    var regr = button.data('whatever') // Extract info from data-* attributes
                    // If necessary, you could initiate an AJAX request here (and then do the updating in a callback).
                    // Update the modal's content. We'll use jQuery here, but you could use a data binding library or other methods instead.
                    var modal = $(this)
                    modal.find('.modal-title').text('New ' + regr + ' registration')
                    // modal.find('.modal-body input').val(contact)
                  })

                </script>
              </nav>

              <div class="seperator">
                <div class="devider-sep"></div>
              </div>


              <div class="seperator">
                <div class="devider-sep"></div>
              </div>

              <section class="feedback">
                <h3 class="h3 w-5">
                  If you have a minute while you're here, AKA dealers love to hear your
                  feedback/review
                </h3>

                <!-- In case your internet is off or CloudantDB is not available, render warning -->
                <div class="warn">
                  <span class="text-warning mx-auto px-auto h5">
                    {{ warning }}
                  </span>
                </div>
                <!-- Online or Cloudant available -->
                {% if user.is_authenticated %}
                <!-- Add review  -->
                <div class="row mt-5">
                  <div class="mx-auto col-10 p-20">
                    <form action="{% url 'djangoapp:reviews' %}" method="POST" class="ml-5 p-2">
                      <div class="text-align-center">
                        <span class="text-success">{{ success }}</span>
                      </div>
                      {% csrf_token %}
                      <div class="mb-2 row">
                        Name:
                        <div class="col-sm-10" style="margin-left: 30px">
                          <input
                          type="text"
                          name="name"
                          placeholder="Enter your name e.g. Nicergrer"
                          id="revs"
                          class="rounded-2"
                          size="20"
                          minlength="4"
                          maxlength="20"
                          required
                          />
                        </div>
                      </div>
                      <div class="mb-2 row">
                        Car Type:
                        <div class="col-sm-10" style="margin-left: 10px">
                          <input
                          type="text"
                          name="ctype"
                          placeholder="Enter car type e.g. Ford"
                          id="ctype"
                          class="rounded-2"
                          />
                        </div>
                      </div>
                      <div class="mb-2 row">
                        Car Model:
                        <div class="col-sm-10">
                          <input
                          type="text"
                          name="cmodel"
                          placeholder="Enter car model e.g. A3"
                          id="cmodel"
                          class="rounded-2"
                          />
                        </div>
                      </div>
                      <div class="mb-2 row">
                        Car Year:
                        <div class="col-sm-10" style="margin-left: 15px">
                          <input
                          type="number"
                          name="year"
                          placeholder="Enter year e.g. 2100 "
                          id="year"
                          class="rounded-2"
                          />
                        </div>
                      </div>

                      <div class="mb-2 row">
                        Have you purchased?:
                        <div class="col-sm-10">
                          <input
                          class="form-check-input ml-2 p-1"
                          name="purchase"
                          type="checkbox"
                          id="purchase"
                          autocomplete
                          />
                        </div>
                      </div>
                      <div class="mb-2 row">
                        Purchased date:
                        <div>
                          <input
                          class="mx-auto px-auto"
                          type="date"
                          name="client_purchase"
                          id="date-own"
                          min="01-01-1900"
                          max="31-12-2023"
                          />
                        </div>
                      </div>

                      <div class="form-group">
                        <label class="" for="txtarea">Your Message: </label>
                        <textarea
                        class="form-control w-50 rounded-4"
                        id="txtarea"
                        rows="5"
                        name="review"
                        required
                        ></textarea>
                      </div>
                      <button class="btn btn-primary rounded-3 mt-2" type="submit">
                        Send
                      </button>
                    </form>

                    <script type="text/javascript">
                      $('#date-own').datepicker({
                        format: 'mm-dd-yyyy',
                      });
                    </script>
                  </div>
                </div>

                <button class="btn btn-secondary m-5 py-2 px-4 rounded-4">
                  <a
                  href="{% url 'djangoapp:reviewed' %} "
                  class="text-warning text-decoration-none"
                  >Back</a
                  >
                </button>
        <!-- <div class="seperator">
        <div class="devider-sep"></div>
      </div> -->

      {% else %}
      <div class="container w-4 mt-5 px-auto text-align-center">
       <span class="text-info mx-auto px-auto">Hey, could you please sign in your account to share your feedback.</span>
       <br />
       <span class="text-secondary px-auto mx-auto">If you are a visitor and have to share your review of one of AKA dealers offices, please register <a class="btn text-primary text-decoration-none" target="_self" rel="noopener" data-toggle="modal" data-target="#regsModal" data-whatever="user">here</a> or login <a class="btn text-primary text-decoration-none" target="_self" rel="noopener" data-toggle="modal" data-target="#loginModal" data-whatever="user">here</a></span>
     </div>
     {% endif %}
   </section>
 </main>
 <!-- JS -->
 <script
 src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"
 integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe"
 crossorigin="anonymous"
 ></script>
 <!-- JQuery -->
 <script
 src="https://code.jquery.com/jquery-3.6.4.slim.min.js"
 integrity="sha256-a2yjHM4jnF9f54xUQakjZGaqYs/V1CYvWpoqZzC2/Bw="
 crossorigin="anonymous"
 ></script>
 <!-- Ajax -->
 <script
 src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.4/jquery.min.js"
 integrity="sha512-pumBsjNRGGqkPzKHndZMaAG+bir374sORyzM3uulLV14lN5LyykqNk8eEeUlUkB3U0M4FApyaHraT65ihJhDpQ=="
 crossorigin="anonymous"
 referrerpolicy="no-referrer"
 ></script>

 <script src="https://unpkg.com/bootstrap-table@1.21.4/dist/bootstrap-table.min.js"></script>
 <script src="https://unpkg.com/bootstrap-table@1.18.2/dist/extensions/filter-control/bootstrap-table-filter-control.min.js"></script>
</body>
</html>
